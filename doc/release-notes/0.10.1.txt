RELEASE NOTES 0.10.1 (2019-11-??)


1. Language: Enum .value attribute in at-expression

Now the "value" attribute of an enum can be used in at-expression:

enum role { ADMIN, USER }
entity account { name; role; }

account @* {} ( .name, .role.value )


2. Language: External annotation

External blocks replaced by "@external" annotation:

@external('chain_name') namespace {
    @log entity user {}
    @log entity company {}
}

@external('chain_name') @log entity city {}


3. Language: External modules

A module can be annotated with "@external":

@external module;
@log entity user {}
@log entity company {}

An external module:
- can contain only namespaces, entities (annotated with "@log") and imports of other external modules
- can be imported as a regular or an external module

// Regular import: entities defined in "ext" belong to the current blockchain.
import ext;

// External import: entities defined in "ext" are imported as external entities from chain "other_chain".
@external('other_chain')
import ext;


4. Language: Abstract modules and functions

A module or a function can be declared abstract:

abstract module;
abstract function customize(x: integer): text;

Abstract functions shall be overridden in client modules:

import lib;
override function lib.customize(x: integer): text { ... }

This allows to customize a library module with arbitrary behavior. When importing an abstract module, all its
abstract functions that have no body must be overridden.


5. Run-time: Error stack traces

Now Rell prints stack traces of run-time errors (with function names, file names and line numbers):

2019-11-24 17:28:30.980 INFO  net.postchain.rell.Rell - ERROR Query 'ent_main_q' failed: No records found
	at stack_trace.entities!ent_main(stack_trace/entities.rell:6)
	at stack_trace.entities!ent_main_q(stack_trace/entities.rell:11)

Stack traces are printed to the output of a Rell app (Web IDE log, Eclipse Console view, Postchain log file, etc.).

Run-time error messages returned to the client (as a one line, without a stack trace) will have a location:

[stack_trace.entities!ent_main(stack_trace/entities.rell:6)] Query 'ent_main_q' failed: No records found
